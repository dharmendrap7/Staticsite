@using Microsoft.AspNet.Identity;
@using Conquerorhub.SDK.Services
@{
    var obj = new ApplicationMandatoryService();
    if (ViewBag.UserId != null)
    {
        Guid? abc = ViewBag.UserId;

        ViewBag.UserName = obj.Getuserlist("adsfff").Entity.FirstOrDefault(a => a.Id == abc.ToString()).UserName;
        ViewBag.UserType = obj.Getuserlist("adsfff").Entity.FirstOrDefault(a => a.Id == abc.ToString()).Usertype;
    }
    else
    {
        var id = User.Identity.GetUserId();
        ViewBag.UserName = obj.Getuserlist("adsfff").Entity.FirstOrDefault(a => a.Id == id).UserName;
        ViewBag.UserType = obj.Getuserlist("adsfff").Entity.FirstOrDefault(a => a.Id == id).Usertype;
    }
    var id1 = User.Identity.GetUserId();
    ViewBag.UserHeaderName = obj.Getuserlist("adsfff").Entity.FirstOrDefault(a => a.Id == id1).UserName;

}



<div class="responsive-header">
    <div class="mh-head first Sticky">
        <span class="mh-btns-left">
            <a class="" href="#menu"><i class="fa fa-align-justify"></i></a>
        </span>
        <span class="mh-text">
            <a href="newsfeed.html" title=""><img src="images/logo2.png" alt=""></a>
        </span>
        <span class="mh-btns-right">
            <a class="fa fa-sliders" href="#shoppingbag"></a>
        </span>
    </div>
    <div class="mh-head second">
        <form class="mh-form">
            <input placeholder="search" />
            <a href="#/" class="fa fa-search"></a>
        </form>
    </div>
    <nav id="menu" class="res-menu">
        <ul>
            <li>
                <span>Home</span>
                <ul>
                    <li><a href="index-2.html" title="">Home Social</a></li>
                    <li><a href="index2.html" title="">Home Social 2</a></li>
                    <li><a href="index-company.html" title="">Home Company</a></li>
                    <li><a href="landing.html" title="">Login page</a></li>
                    <li><a href="logout.html" title="">Logout Page</a></li>
                    <li><a href="newsfeed.html" title="">news feed</a></li>
                </ul>
            </li>
            <li>
                <span>Time Line</span>
                <ul>
                    <li><a href="time-line.html" title="">timeline</a></li>
                    <li><a href="timeline-friends.html" title="">timeline friends</a></li>
                    <li><a href="timeline-groups.html" title="">timeline groups</a></li>
                    <li><a href="timeline-pages.html" title="">timeline pages</a></li>
                    <li><a href="timeline-photos.html" title="">timeline photos</a></li>
                    <li><a href="timeline-videos.html" title="">timeline videos</a></li>
                    <li><a href="fav-page.html" title="">favourit page</a></li>
                    <li><a href="groups.html" title="">groups page</a></li>
                    <li><a href="page-likers.html" title="">Likes page</a></li>
                    <li><a href="people-nearby.html" title="">people nearby</a></li>


                </ul>
            </li>
            <li>
                <span>Account Setting</span>
                <ul>
                    <li><a href="create-fav-page.html" title="">create fav page</a></li>
                    <li><a href="edit-account-setting.html" title="">edit account setting</a></li>
                    <li><a href="edit-interest.html" title="">edit-interest</a></li>
                    <li><a href="edit-password.html" title="">edit-password</a></li>
                    <li><a href="edit-profile-basic.html" title="">edit profile basics</a></li>
                    <li><a href="edit-work-eductation.html" title="">edit work educations</a></li>
                    <li><a href="messages.html" title="">message box</a></li>
                    <li><a href="inbox.html" title="">Inbox</a></li>
                    <li><a href="notifications.html" title="">notifications page</a></li>
                </ul>
            </li>
            <li>
                <span>forum</span>
                <ul>
                    <li><a href="forum.html" title="">Forum Page</a></li>
                    <li><a href="forums-category.html" title="">Fourm Category</a></li>
                    <li><a href="forum-open-topic.html" title="">Forum Open Topic</a></li>
                    <li><a href="forum-create-topic.html" title="">Forum Create Topic</a></li>
                </ul>
            </li>
            <li>
                <span>Our Shop</span>
                <ul>
                    <li><a href="shop.html" title="">Shop Products</a></li>
                    <li><a href="shop-masonry.html" title="">Shop Masonry Products</a></li>
                    <li><a href="shop-single.html" title="">Shop Detail Page</a></li>
                    <li><a href="shop-cart.html" title="">Shop Product Cart</a></li>
                    <li><a href="shop-checkout.html" title="">Product Checkout</a></li>
                </ul>
            </li>
            <li>
                <span>Our Blog</span>
                <ul>
                    <li><a href="blog-grid-wo-sidebar.html" title="">Our Blog</a></li>
                    <li><a href="blog-grid-right-sidebar.html" title="">Blog with R-Sidebar</a></li>
                    <li><a href="blog-grid-left-sidebar.html" title="">Blog with L-Sidebar</a></li>
                    <li><a href="blog-masonry.html" title="">Blog Masonry Style</a></li>
                    <li><a href="blog-list-wo-sidebar.html" title="">Blog List Style</a></li>
                    <li><a href="blog-list-right-sidebar.html" title="">Blog List with R-Sidebar</a></li>
                    <li><a href="blog-list-left-sidebar.html" title="">Blog List with L-Sidebar</a></li>
                    <li><a href="blog-detail.html" title="">Blog Post Detail</a></li>
                </ul>
            </li>
            <li>
                <span>Portfolio</span>
                <ul>
                    <li><a href="portfolio-2colm.html" title="">Portfolio 2col</a></li>
                    <li><a href="portfolio-3colm.html" title="">Portfolio 3col</a></li>
                    <li><a href="portfolio-4colm.html" title="">Portfolio 4col</a></li>
                </ul>
            </li>
            <li>
                <span>Support & Help</span>
                <ul>
                    <li><a href="support-and-help.html" title="">Support & Help</a></li>
                    <li><a href="support-and-help-detail.html" title="">Support & Help Detail</a></li>
                    <li><a href="support-and-help-search-result.html" title="">Support & Help Search Result</a></li>
                </ul>
            </li>
            <li>
                <span>More pages</span>
                <ul>
                    <li><a href="careers.html" title="">Careers</a></li>
                    <li><a href="career-detail.html" title="">Career Detail</a></li>
                    <li><a href="404.html" title="">404 error page</a></li>
                    <li><a href="404-2.html" title="">404 Style2</a></li>
                    <li><a href="faq.html" title="">faq's page</a></li>
                    <li><a href="insights.html" title="">insights</a></li>
                    <li><a href="knowledge-base.html" title="">knowledge base</a></li>
                </ul>
            </li>
            <li><a href="about.html" title="">about</a></li>
            <li><a href="about-company.html" title="">About Us2</a></li>
            <li><a href="contact.html" title="">contact</a></li>
            <li><a href="contact-branches.html" title="">Contact Us2</a></li>
            <li><a href="widgets.html" title="">Widgts</a></li>
        </ul>
    </nav>
    <nav id="shoppingbag">
        <div>
            <div class="">
                <form method="post">
                    <div class="setting-row">
                        <span>use night mode</span>
                        <input type="checkbox" id="nightmode" />
                        <label for="nightmode" data-on-label="ON" data-off-label="OFF"></label>
                    </div>
                    <div class="setting-row">
                        <span>Notifications</span>
                        <input type="checkbox" id="switch2" />
                        <label for="switch2" data-on-label="ON" data-off-label="OFF"></label>
                    </div>
                    <div class="setting-row">
                        <span>Notification sound</span>
                        <input type="checkbox" id="switch3" />
                        <label for="switch3" data-on-label="ON" data-off-label="OFF"></label>
                    </div>
                    <div class="setting-row">
                        <span>My profile</span>
                        <input type="checkbox" id="switch4" />
                        <label for="switch4" data-on-label="ON" data-off-label="OFF"></label>
                    </div>
                    <div class="setting-row">
                        <span>Show profile</span>
                        <input type="checkbox" id="switch5" />
                        <label for="switch5" data-on-label="ON" data-off-label="OFF"></label>
                    </div>
                </form>
                <h4 class="panel-title">Account Setting</h4>
                <form method="post">
                    <div class="setting-row">
                        <span>Sub users</span>
                        <input type="checkbox" id="switch6" />
                        <label for="switch6" data-on-label="ON" data-off-label="OFF"></label>
                    </div>
                    <div class="setting-row">
                        <span>personal account</span>
                        <input type="checkbox" id="switch7" />
                        <label for="switch7" data-on-label="ON" data-off-label="OFF"></label>
                    </div>
                    <div class="setting-row">
                        <span>Business account</span>
                        <input type="checkbox" id="switch8" />
                        <label for="switch8" data-on-label="ON" data-off-label="OFF"></label>
                    </div>
                    <div class="setting-row">
                        <span>Show me online</span>
                        <input type="checkbox" id="switch9" />
                        <label for="switch9" data-on-label="ON" data-off-label="OFF"></label>
                    </div>
                    <div class="setting-row">
                        <span>Delete history</span>
                        <input type="checkbox" id="switch10" />
                        <label for="switch10" data-on-label="ON" data-off-label="OFF"></label>
                    </div>
                    <div class="setting-row">
                        <span>Expose author name</span>
                        <input type="checkbox" id="switch11" />
                        <label for="switch11" data-on-label="ON" data-off-label="OFF"></label>
                    </div>
                </form>
            </div>
        </div>
    </nav>
</div><!-- responsive header -->


<div class="topbar stick">
    <div class="logo">
        <a title="" href="#"><img src="~/Content/Images/ConquerorHubtitle.png" height="50" width="50" /></a>

    </div>
    @if (ViewBag.UserType == 1)
    {
        <div class="top-area">
            <ul class="main-menu">
                <li>
                    <a href="@Url.Action("ProfilePage", "OrganizerBasicDetails")" title="">@ViewBag.UserHeaderName</a>

                </li>
                <li>
                    <a href="@Url.Action("Home", "OrganizerBasicDetails")" title="">Home</a>

                </li>
                <li>
                    <a href="#" title="">Account settings</a>
                    <ul>


                        <li><a href="@Url.Action("ChangePassword", "Manage")" title="">edit-password</a></li>
                        <li><a class="" href="@Url.Action("AboutUs", "OrganizerBasicDetails", new { userid = ViewBag.UserId })" title="" data-ripple="">edit profile basics</a></li>
                        @*<li><a href="notifications.html" title="">notifications page</a></li>*@
                        <li> <a href="#ex1" rel="modal:open">Deactivate Account</a></li>
                        <li><a href="@Url.Action("GetBlockList", "BasicFunctionality")">Blocked Users</a></li>
                    </ul>
                </li>

            </ul>
            <ul class="setting-area">
                <li>
                    <a href="#" title="Home" data-ripple=""><i class="ti-search"></i></a>
                    <div class="searched">
                        <form method="post" class="form-search">
                            <div class="autocomplete">
                                <input type="text" id="myInput" placeholder="Search" name="MyInput">
                            </div>
                            <button type="submit" data-ripple id="btn"><i class="ti-search"></i></button>

                        </form>

                    </div>
                </li>
                @*<li><a href="newsfeed.html" title="Home" data-ripple=""><i class="ti-home"></i></a></li>*@
                <li>
                    <a href="#" title="Notification" data-ripple="">
                        <i class="ti-bell" onclick="appendcontent()"></i><span class="count"></span>
                    </a>
                    <div class="dropdowns">

                        <ul class="drops-menu" id="notiContent"></ul>
                        <a href="notifications.html" title="" class="more-mesg">End of notification</a>
                    </div>
                </li>

                @*<li>
                        <a href="#" title="Languages" data-ripple=""><i class="fa fa-globe"></i></a>
                        <div class="dropdowns languages">
                            <a href="#" title=""><i class="ti-check"></i>English</a>
                            <a href="#" title="">Arabic</a>
                            <a href="#" title="">Dutch</a>
                            <a href="#" title="">French</a>
                        </div>
                    </li>*@
            </ul>
            <div class="user-img">
                @if (Session["Logedinuserprofile"] == null)
                {
                    <img src="~/Content/WinkuTemplate/images/resources/admin.jpg" />
                }
                else
                {
                    <img src="@Session["Logedinuserprofile"]" height="80" width="80" />
                }
                <span class="status f-online"></span>
                <div class="user-setting">                   
                    <a class="process-editprofileorg" data-user="@ViewBag.UserId" title="" data-ripple=""><i class="ti-pencil-alt"></i>edit profile</a>

                    <a href="@Url.Action("LogOff","Account")" title=""><i class="ti-power-off"></i>log out</a>
                </div>
            </div>
            @*<span class="ti-menu main-menu" data-ripple=""></span>*@
        </div>
    }
    else if (ViewBag.UserType == 2)
    {
        <div class="top-area">
            <ul class="main-menu">
                <li>
                    <a href="@Url.Action("ParticipantProfile", "Participants")" title="">@ViewBag.UserHeaderName</a>

                </li>
                <li>
                    <a href="@Url.Action("ParticipantHome", "Participants")" title="">Home</a>

                </li>
                <li>
                    <a href="#" title="">Account settings</a>
                    <ul>


                        <li><a href="@Url.Action("ChangePassword", "Manage")" title="">edit-password</a></li>
                        <li><a class="" href="@Url.Action("ParticipantAbout", "Participants", new { userid = ViewBag.UserId })" title="" data-ripple="">edit profile basics</a></li>
                        <li> <a href="#ex1" rel="modal:open">Deactivate Account</a></li>
                        <li><a href="@Url.Action("GetBlockList", "BasicFunctionality")">Blocked Users</a></li>

                        <li><a href="notifications.html" title="">notifications page</a></li>
                    </ul>
                </li>

            </ul>
            <ul class="setting-area">
                <li>
                    <a href="#" title="Home" data-ripple=""><i class="ti-search"></i></a>
                    <div class="searched">
                        <form method="post" class="form-search">
                            <div class="autocomplete">
                                <input type="text" id="myInput" placeholder="Search" name="MyInput">
                            </div>
                            <button type="submit" data-ripple id="btn"><i class="ti-search"></i></button>

                        </form>

                    </div>
                </li>
                @*<li><a href="newsfeed.html" title="Home" data-ripple=""><i class="ti-home"></i></a></li>*@
                <li>
                    <a href="#" title="Notification" data-ripple="">
                        <i class="ti-bell" onclick="appendcontent()"></i><span class="count"></span>
                    </a>
                    <div class="dropdowns">

                        <ul class="drops-menu" id="notiContent"></ul>
                        <a href="notifications.html" title="" class="more-mesg">End of notification</a>
                    </div>
                </li>

                @*<li>
                        <a href="#" title="Languages" data-ripple=""><i class="fa fa-globe"></i></a>
                        <div class="dropdowns languages">
                            <a href="#" title=""><i class="ti-check"></i>English</a>
                            <a href="#" title="">Arabic</a>
                            <a href="#" title="">Dutch</a>
                            <a href="#" title="">French</a>
                        </div>
                    </li>*@
            </ul>
            <div class="user-img">
                @if (Session["Logedinuserprofile"] == null)
                {
                    <img src="~/Content/WinkuTemplate/images/resources/admin.jpg" />
                }
                else
                {
                    <img src="@Session["Logedinuserprofile"]" height="80" width="80" />
                }


                <span class="status f-online"></span>
                <div class="user-setting">
                    @*<a href="#" title=""><span class="status f-online"></span>online</a>
        <a href="#" title=""><span class="status f-away"></span>away</a>
        <a href="#" title=""><span class="status f-off"></span>offline</a>
        <a href="#" title=""><i class="ti-user"></i> view profile</a>*@
                    <a href="#" title=""><i class="ti-pencil-alt"></i>edit profile</a>
                    @*<a class="ti-pencil-alt" href="@Url.Action("ParticipantAbout", "Participants", new { userid = ViewBag.UserId })" title="" data-ripple="">2edit profile</a>*@
                    <a class="process-editprofilepar" data-user="@ViewBag.UserId" title="" data-ripple=""><i class="ti-pencil-alt"></i>edit profile</a>
                    @*<a href="#" title=""><i class="ti-target"></i>activity log</a>
        <a href="#" title=""><i class="ti-settings"></i>account setting</a>*@
                    <a href="@Url.Action("LogOff","Account")" title=""><i class="ti-power-off"></i>logout</a>
                </div>
            </div>
            @*<span class="ti-menu main-menu" data-ripple=""></span>*@
        </div>
    }
</div>

<script>
    function appendcontent() {
        debugger;
        $('span.count').hide();
        var count = 0;
        count = parseInt($('span.count').html()) || 0;
        count++;
        // only load notification if not already loaded
        if (count > 0) {
            updatenotification();
        }

        $('span.count', this).html(' ');


    }
    function updatenotification() {
        $('#notiContent').empty();

        $.ajax({
            url: "/BasicFunctionality/GetNotifications",
            type: "GET",
            dataType: "json",
            contentType: "application/json",
            // data: { term: request.term },
            success: function (data) {
                debugger;
                $.each(data.Item1, function (index, list) {
                    debugger;
                    var data1 = JSON.stringify(list.aboutEvent);
                    var stringify = JSON.parse(data1);
                    var link = "http://localhost:56621/Events/EventDetailsToParticipants?id="+ stringify['EventId']+"&Userid=" +@ViewBag.UserId + "";

                    $('#notiContent').append($('<li><a href=' + link + '><img src=' + stringify['Profilepic'] + 'height="50px" width="50px"/>' + stringify['NameofOrganizer'] + ' have Organized the event </span><i>2 min ago</i></div>  </a></li>'));



                })
                $.each(data.Item2, function (index, list) {
                    debugger;
                    var data1 = JSON.stringify(list);
                    var stringify = JSON.parse(data1);
                    var link = "http://localhost:56621/BasicFunctionality/GetNotificationpost?postid="+stringify['Imageid']+"&sourceId="+stringify['SourceUserId']+"";

                    $('#notiContent').append($('<li><a href=' + link + '><img src=' + stringify['profilepic'] + ' height="50px" width="50px"/>' + " " + stringify['UserName'] + ' have liked the post</a></li>'));

                });
                $.each(data.Item3, function (index, list) {
                    debugger;
                    var data1 = JSON.stringify(list);
                    var stringify = JSON.parse(data1);
                    var link = "http://localhost:56621/BasicFunctionality/GetNotificationpost?postid=" + stringify['PostId'] + "";
                    $('#notiContent').append($('<li><a href=' + link + '><img src=' + stringify['profilepic'] + ' height="50px" width="50px"/>' + stringify['UserName'] + ' have shared the post</a></li>'));

                });
                $.each(data.Item4, function (index, list) {
                    debugger;
                    var data1 = JSON.stringify(list);
                    var stringify = JSON.parse(data1);
                    var link = "http://localhost:56621/OrganizerBasicDetails/ProfilePage?UserId=" + stringify['SubscriberUserId'] + "";
                    $('#notiContent').append($('<li><a href=' + link + '><img src=' + stringify['profilepic'] + ' height="50px" width="50px"/>' + stringify['UserName'] + ' have shared the post</a></li>'));

                });
                $.each(data.Item5, function (index, list) {
                    debugger;
                    var data1 = JSON.stringify(list);
                    var stringify = JSON.parse(data1);
                    var link = "http://localhost:56621/BasicFunctionality/GetNotificationpost?postid=" + stringify['PostId'] + "";
                    $('#notiContent').append($('<li><a href=' + link + '><img src=' + stringify['ProfilePic'] + ' height="50px" width="50px"/>' + stringify['UserName'] + ' have shared the post</a></li>'));

                });
                $.each(data.Item6, function (index, list) {
                    debugger;
                    var data1 = JSON.stringify(list);
                    var stringify = JSON.parse(data1);
                    var link = "http://localhost:56621/BasicFunctionality/GetNotificationpost?postid=" + stringify['PostId'] + "";
                    $('#notiContent').append($('<li><a href=' + link + '><img src=' + stringify['ProfilePic'] + ' height="50px" width="50px"/>' + stringify['UserName'] + ' have shared the post</a></li>'));

                });



                // autocomplete(document.getElementById("myInput"), data);
            },
            error: function (error) {
                alert(error);
            }
        })
    }
    var notificationHub = $.connection.notificationHub;
    notificationHub.client.notify = function (message) {
        debugger;
        if (message && message.toLowerCase() == "added") {
            updateNotificationCount();
        }
    }

    $.connection.hub.start().done(function () {
        debugger;
        console.log('Notification hub started');
    });

    function updateNotificationCount() {
        debugger;
        $('span.count').show();
        var count = 0;
        count = parseInt($('span.count').html()) || 0;
        count++;

        $('span.count').css({ "color": "#088DCD" });
        $('span.count').html(count);

    }
</script>
<script>
    function  GetSubscriber(id) {
        debugger;
        $.ajax({
            type: "GET",
            url: "@Url.Action("GetSubscribersList", "BasicFunctionality")",
            contentType: "application/json; charset=utf-8",
        data:{ Id: id },
        dataType: "json",
        success: function (result) {
            location.reload(true);

            $('#true_'+id).html('');
            $('#true_'+id).html(@ViewBag.SubscribersCount);
            $('#false_'+id).html('');
            $('#false_'+id).html(@ViewBag.SubscribersCountfalse);


        },
        error: function () { alert('A error'); }
    });


    }


    function postSubscriber(x, id,ref) {
        debugger;
        $.ajax({
            type: "POST",
            url: "@Url.Action("SaveSubscribers", "BasicFunctionality")",

            contentType: "application/json; charset=utf-8",
        data: JSON.stringify({
            status: x,
            UserId: id
        }),
        dataType: "json",
        success: function (result) {
            GetSubscriber(id);

        },
        error: function () {
            GetSubscriber(id);

        }
    });


    }
    function GetLike(id, userid) {
        debugger;
        $.ajax({
            type: "GET",
            url: "@Url.Action("GetLLikesList", "BasicFunctionality")",

            contentType: "application/json; charset=utf-8",
        data:{ Id: id },
        dataType: "json",
        success: function (result) {
            $("likecount").append()
            alert('Success');
        },
        error: function () { alert('A error'); }
    });
    }
   function postlike(x, id,userId,ref) {
        debugger;
         $.ajax({
            type: "POST",
            url: "@Url.Action("SaveLikes","BasicFunctionality")",

            contentType: "application/json; charset=utf-8",
        data: JSON.stringify({
            status: x,
            id:id,
            userid: userId
        }),
        dataType: "json",
        success: function (result) {
            debugger;

            $('#Like_' + id).html('');
            $('#Like_' + id).html(result[0]);
            $('#DisLike_' + id).html('');
            $('#DisLike_' + id).html(result[1]);

            // alert('Success');   DisLike_
          //  GetLike(id, userId)

        },
        error: function () { alert('A error'); }
    });
   }

    function  GetShare(id) {
        debugger;
        $.ajax({
            type: "GET",
            url: "@Url.Action("GetShareList", "BasicFunctionality")",

            contentType: "application/json; charset=utf-8",
        data:{ Id: id },
        dataType: "json",
        success: function (result) {
            var data1 = JSON.stringify(result);
            $('#shareId_'+id).html('');
            $('#shareId_' + id).html(result.ShareCount);
            alert(result.ShareCount);
        },
        error: function () { alert('A error'); }
    });
    }
    function postshare(id,Userid) {
        debugger;
        $.ajax({
            type: "POST",
            url: "@Url.Action("SaveShare","BasicFunctionality")",

            contentType: "application/json; charset=utf-8",
        data: JSON.stringify({
            id: id,
            sourceid:Userid
        }),
        dataType: "json",
        success: function (result) {
            alert('Success');
            GetShare(id)

        },
        error: function () { alert('A error'); }
    });
    }
</script>
<script>
        $(document).ready(function () {
            $('#btn').click(function () {
                debugger;

                var res = $('#myInput').val();
                alert("Search clicked " + res)
                window.location.href = '@Url.Action("Home1", "OrganizerBasicDetails")?name=' + res;

            });
            var urlEditProfileOrg = '@Url.Action("AboutUs")'; // Organizer Edit profile -Dharmendra15042020
$('.process-editprofileorg').click(function() {
  $.post(urlEditProfileOrg, { userid: $(this).data('userid') }, function(response) {
    if(response) {
        window.location.href = '@Url.Action("AboutUs", "OrganizerBasicDetails",new { userid = ViewBag.UserId })';
    } else {
        // alert("error");
    }
  })
})
                        var urlEditProfilePar = '@Url.Action("ParticipantAbout")'; // Participants Edit profile -Dharmendra15042020
$('.process-editprofilepar').click(function() {
  $.post(urlEditProfilePar, { userid: $(this).data('userid') }, function(response) {
    if(response) {
        window.location.href = '@Url.Action("ParticipantAbout", "Participants",new { userid = ViewBag.UserId })';
    } else {
        // alert("error");
    }
  })
})
                        var urlLogoutOrg = '@Url.Action("LogOff")'; // Organizer Logout -Dharmendra15042020
$('.process-logoutorg').click(function() {
  $.post(urlLogoutOrg, { userid: $(this).data('userid') }, function(response) {
    if(response) {
        window.location.href = '@Url.Action("LogOff", "Participants",new { userid = ViewBag.UserId })';
    } else {
        // alert("error");
    }
  })
})
                        var urlLogoutPar = '@Url.Action("LogOff")'; // Participants Logout -Dharmendra15042020
$('.process-logoutpar').click(function() {
  $.post(urlLogoutPar, { userid: $(this).data('userid') }, function(response) {
    if(response) {
        window.location.href = '@Url.Action("LogOff", "Participants",new { userid = ViewBag.UserId })';
    } else {
        // alert("error");
    }
  })
})
        });
</script>
<script type="text/javascript">

    var arr = null;
    $(function () {
        $.ajax({
            url: "/Events/Searchbox",
            type: "GET",
            dataType: "json",
            contentType: "application/json",
            // data: { term: request.term },
            success: function (data) {
                debugger;
                // arr = data;
                autocomplete(document.getElementById("myInput"), data);
            },

        });
    });

    function autocomplete(inp, arr) {
        debugger;
        var currentFocus;
        inp.addEventListener("input", function (e) {
            debugger;
            var a, b, i, val = this.value;
            closeAllLists();
            if (!val) { return false; }
            currentFocus = -1;
            a = document.createElement("DIV");
            a.setAttribute("id", this.id + "autocomplete-list");
            a.setAttribute("class", "autocomplete-items");
            this.parentNode.appendChild(a);
            for (i = 0; i < arr.length; i++) {
                if (arr[i].substr(0, val.length).toUpperCase() == val.toUpperCase()) {
                    b = document.createElement("DIV");
                    b.innerHTML = "<strong>" + arr[i].substr(0, val.length) + "</strong>";
                    b.innerHTML += arr[i].substr(val.length);
                    b.innerHTML += "<input type='hidden' value='" + arr[i] + "'>";
                    b.addEventListener("click", function (e) {
                        inp.value = this.getElementsByTagName("input")[0].value;
                        closeAllLists();
                    });
                    a.appendChild(b);
                }
            }
        });
        /*execute a function presses a key on the keyboard:*/
        inp.addEventListener("keydown", function (e) {
            var x = document.getElementById(this.id + "autocomplete-list");
            if (x) x = x.getElementsByTagName("div");
            if (e.keyCode == 40) {
                /*If the arrow DOWN key is pressed,
                increase the currentFocus variable:*/
                currentFocus++;
                /*and and make the current item more visible:*/
                addActive(x);
            } else if (e.keyCode == 38) { //up
                /*If the arrow UP key is pressed,
                decrease the currentFocus variable:*/
                currentFocus--;
                /*and and make the current item more visible:*/
                addActive(x);
            } else if (e.keyCode == 13) {
                /*If the ENTER key is pressed, prevent the form from being submitted,*/
                e.preventDefault();
                if (currentFocus > -1) {
                    /*and simulate a click on the "active" item:*/
                    if (x) x[currentFocus].click();
                }
            }
        });
        function addActive(x) {
            /*a function to classify an item as "active":*/
            if (!x) return false;
            /*start by removing the "active" class on all items:*/
            removeActive(x);
            if (currentFocus >= x.length) currentFocus = 0;
            if (currentFocus < 0) currentFocus = (x.length - 1);
            /*add class "autocomplete-active":*/
            x[currentFocus].classList.add("autocomplete-active");
        }
        function removeActive(x) {
            /*a function to remove the "active" class from all autocomplete items:*/
            for (var i = 0; i < x.length; i++) {
                x[i].classList.remove("autocomplete-active");
            }
        }
        function closeAllLists(elmnt) {
            /*close all autocomplete lists in the document,
            except the one passed as an argument:*/
            var x = document.getElementsByClassName("autocomplete-items");
            for (var i = 0; i < x.length; i++) {
                if (elmnt != x[i] && elmnt != inp) {
                    x[i].parentNode.removeChild(x[i]);
                }
            }
        }
        /*execute a function when someone clicks in the document:*/
        document.addEventListener("click", function (e) {
            closeAllLists(e.target);
        });
    }




</script>